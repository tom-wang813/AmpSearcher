schema: '2.0'
stages:
  generate_data:
    cmd: python scripts/generate_synthetic_data.py --output_path data/synthetic_data.csv
    deps:
    - path: scripts/generate_synthetic_data.py
      hash: md5
      md5: a788c286dd3ffb8e6d9945d1542b4e82
      size: 2268
    outs:
    - path: data/synthetic_data.csv
      hash: md5
      md5: 9134974b8463d8b6e89c7a4e51dacdef
      size: 34311
  train_model:
    cmd: python train.py --config configs/train_synthetic_classifier.yaml --data_path
      data/synthetic_data.csv --sequence_col sequence --label_col label
    deps:
    - path: configs/train_synthetic_classifier.yaml
      hash: md5
      md5: b25a229c4749e52c56214fed22a2be4e
      size: 1013
    - path: data/synthetic_data.csv
      hash: md5
      md5: 4fcd740f7929f8a9461b205028430e6a
      size: 34164
    - path: src/amp_searcher
      hash: md5
      md5: d916a36959120d705e3731bd41399a23.dir
      size: 332405
      nfiles: 131
    - path: train.py
      hash: md5
      md5: b74caed7d77db74d996b8064e9e9124f
      size: 2163
    outs:
    - path: lightning_logs/synthetic_classifier_run
      hash: md5
      md5: 7b45089dfe1288f8e30d06e567a2597e.dir
      size: 94397
      nfiles: 3
  run_optimization:
    cmd: python scripts/run_optimization.py --config configs/optimizers/ga_example.yaml
      --output results/optimized_sequences.csv --model_checkpoint_path "$(python scripts/find_latest_checkpoint.py
      lightning_logs/synthetic_classifier_run | tr -d '\n')"
    deps:
    - path: configs/optimizers/ga_example.yaml
      hash: md5
      md5: 3f95626d5992e43c7df1349da4f8a44d
      size: 1075
    - path: lightning_logs/synthetic_classifier_run
      hash: md5
      md5: 7b45089dfe1288f8e30d06e567a2597e.dir
      size: 94397
      nfiles: 3
    - path: scripts/find_latest_checkpoint.py
      hash: md5
      md5: f1a101b0c389e4a33fe1604d83dbcc0e
      size: 837
    - path: scripts/run_optimization.py
      hash: md5
      md5: 82122c57a4e6eaf7c55e8de237e75291
      size: 4275
    outs:
    - path: results/optimized_sequences.csv
      hash: md5
      md5: 9cf4261853105f93ced956a7c674c1ab
      size: 2028
  train_contrastive_model:
    cmd: python train.py --config_path configs/examples/contrastive_simclr_physicochemical.yaml
    deps:
    - path: configs/examples/contrastive_simclr_physicochemical.yaml
      hash: md5
      md5: 02497d3d0e7e236c3628936f4f71c3a7
      size: 650
    - path: data/processed/baseline_training_data.csv
      hash: md5
      md5: 54a0ede45bb11f8dccfacfd27cf3f3e8
      size: 183016
    - path: src/amp_searcher
      hash: md5
      md5: 47a17e95d1035e940e010a9f90206825.dir
      size: 504033
      nfiles: 180
    - path: train.py
      hash: md5
      md5: f40d88d08191149dc609c0509f6f4e79
      size: 1054
    outs:
    - path: lightning_logs/contrastive_simclr_physicochemical
      hash: md5
      md5: b536ac44e606d45fb378eebcdef3dad0.dir
      size: 72142177
      nfiles: 3
